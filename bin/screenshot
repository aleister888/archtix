#!/bin/sh

# Script para tomar capturas de pantalla

dunstctl close-all

NAME="$(date +"%Y-%m-%d_%H-%M-%S").jpg"
SCRENDIR="$HOME/Im√°genes/Screenshots"
FILE="$SCRENDIR/$NAME"
SOUND="/usr/share/sounds/freedesktop/stereo/camera-shutter.oga"

if [ ! -d "$SCRENDIR" ]; then
	mkdir -p "$SCRENDIR"
fi

all_clip(){
	import -window root jpg:- | xclip -selection clipboard -t image/png
	notify-send -i applets-screenshooter 'Captura copiada al Portapapeles'
}

selection_clip(){
	import png:- | xclip -selection clipboard -t image/png
	notify-send -i applets-screenshooter 'Captura copiada al Portapapeles'
}

all_save(){
	import -window root "$FILE"
	notify-send -i applets-screenshooter "$NAME"
}

selection_save(){
	import "$FILE"
	notify-send -i applets-screenshooter "$NAME"
}


case "$1" in
	all_clip)
		all_clip
		pw-play "$SOUND"
		;;
	selection_clip)
		selection_clip
		pw-play "$SOUND"
		;;
	all_save)
		all_save
		pw-play "$SOUND"
		;;
	selection_save)
		selection_save
		pw-play "$SOUND"
		;;
	*) exit ;;
esac
