#!/bin/sh

# Verifica si /mnt/sd está montado
if [ ! -d "/mnt/sd" ]; then
	exit 0
fi

# Crea un archivo tar con la fecha actual
tar_file="/mnt/sd/$(date +%d_%m_%Y__%H_%S).tar"
tar -cvf "$tar_file" -C /home/aleister/.local/share/multimc/instances/1.16.5/.minecraft/ saves

# Elimina archivos en /mnt/sd que tengan más de 20 días de antigüedad
find /mnt/sd/* -mtime +20 -delete

# Comprueba si tar y find tuvieron éxito
if [ $? -eq 0 ]; then
	echo "Operaciones completadas exitosamente."
else
	echo "Ocurrió un error durante la ejecución del script."
fi
